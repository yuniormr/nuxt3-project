import{N as D,O as K,u as O,P as N}from"./vue.esm-bundler.3c6330b2.js";import{c as U}from"./index.e7fd869b.js";function B(e){return Array.isArray(e)?e:[e]}const V=["title","titleTemplate","script","style","noscript"],b=["base","meta","link","style","script","noscript"],F=["title","titleTemplate","templateParams","base","htmlAttrs","bodyAttrs","meta","link","style","script","noscript"],q=["base","title","titleTemplate","bodyAttrs","htmlAttrs","templateParams"],S=["tagPosition","tagPriority","tagDuplicateStrategy","children","innerHTML","textContent","processTemplateParams"],G=typeof window<"u";function A(e){let n=9;for(let t=0;t<e.length;)n=Math.imul(n^e.charCodeAt(t++),9**9);return((n^n>>>9)+65536).toString(16).substring(1,8).toLowerCase()}function E(e){return e._h||A(e._d?e._d:`${e.tag}:${e.textContent||e.innerHTML||""}:${Object.entries(e.props).map(([n,t])=>`${n}:${String(t)}`).join(",")}`)}function k(e,n){const{props:t,tag:o}=e;if(q.includes(o))return o;if(o==="link"&&t.rel==="canonical")return"canonical";if(t.charset)return"charset";const s=["id"];o==="meta"&&s.push("name","property","http-equiv");for(const r of s)if(typeof t[r]<"u"){const p=String(t[r]);return n&&!n(p)?!1:`${o}:${r}:${p}`}return!1}function $(e,n){return e==null?n||null:typeof e=="function"?e(n):e}async function J(e,n,t){const o={tag:e,props:await x(typeof n=="object"&&typeof n!="function"&&!(n instanceof Promise)?{...n}:{[["script","noscript","style"].includes(e)?"innerHTML":"textContent"]:n},["templateParams","titleTemplate"].includes(e))};return S.forEach(s=>{const r=typeof o.props[s]<"u"?o.props[s]:t[s];typeof r<"u"&&((!["innerHTML","textContent","children"].includes(s)||V.includes(o.tag))&&(o[s==="children"?"innerHTML":s]=r),delete o.props[s])}),o.props.body&&(o.tagPosition="bodyClose",delete o.props.body),o.tag==="script"&&typeof o.innerHTML=="object"&&(o.innerHTML=JSON.stringify(o.innerHTML),o.props.type=o.props.type||"application/json"),Array.isArray(o.props.content)?o.props.content.map(s=>({...o,props:{...o.props,content:s}})):o}function X(e){return typeof e=="object"&&!Array.isArray(e)&&(e=Object.keys(e).filter(n=>e[n])),(Array.isArray(e)?e.join(" "):e).split(" ").filter(n=>n.trim()).filter(Boolean).join(" ")}async function x(e,n){for(const t of Object.keys(e)){if(t==="class"){e[t]=X(e[t]);continue}if(e[t]instanceof Promise&&(e[t]=await e[t]),!n&&!S.includes(t)){const o=String(e[t]),s=t.startsWith("data-");o==="true"||o===""?e[t]=s?"true":!0:e[t]||(s&&o==="false"?e[t]="false":delete e[t])}}return e}const z=10;async function Q(e){const n=[];return Object.entries(e.resolvedInput).filter(([t,o])=>typeof o<"u"&&F.includes(t)).forEach(([t,o])=>{const s=B(o);n.push(...s.map(r=>J(t,r,e)).flat())}),(await Promise.all(n)).flat().filter(Boolean).map((t,o)=>(t._e=e._i,e.mode&&(t._m=e.mode),t._p=(e._i<<z)+o,t))}const M={base:-10,title:10},L={critical:-80,high:-10,low:20};function H(e){let n=100;const t=e.tagPriority;return typeof t=="number"?t:(e.tag==="meta"?(e.props["http-equiv"]==="content-security-policy"&&(n=-30),e.props.charset&&(n=-20),e.props.name==="viewport"&&(n=-15)):e.tag==="link"&&e.props.rel==="preconnect"?n=20:e.tag in M&&(n=M[e.tag]),typeof t=="string"&&t in L?n+L[t]:n)}const Y=[{prefix:"before:",offset:-1},{prefix:"after:",offset:1}],I=["onload","onerror","onabort","onprogress","onloadstart"],h="%separator";function v(e,n,t){if(typeof e!="string"||!e.includes("%"))return e;function o(p){let d;return["s","pageTitle"].includes(p)?d=n.pageTitle:p.includes(".")?d=p.split(".").reduce((a,i)=>a&&a[i]||void 0,n):d=n[p],typeof d<"u"?(d||"").replace(/"/g,'\\"'):!1}let s=e;try{s=decodeURI(e)}catch{}return(s.match(/%(\w+\.+\w+)|%(\w+)/g)||[]).sort().reverse().forEach(p=>{const d=o(p.slice(1));typeof d=="string"&&(e=e.replace(new RegExp(`\\${p}(\\W|$)`,"g"),(a,i)=>`${d}${i}`).trim())}),e.includes(h)&&(e.endsWith(h)&&(e=e.slice(0,-h.length).trim()),e.startsWith(h)&&(e=e.slice(h.length).trim()),e=e.replace(new RegExp(`\\${h}\\s*\\${h}`,"g"),h),e=v(e,{separator:t},t)),e}async function Z(e){const n={tag:e.tagName.toLowerCase(),props:await x(e.getAttributeNames().reduce((t,o)=>({...t,[o]:e.getAttribute(o)}),{})),innerHTML:e.innerHTML};return n._d=k(n),n}async function ee(e,n={}){var f;const t=n.document||e.resolvedOptions.document;if(!t)return;const o={shouldRender:e.dirty,tags:[]};if(await e.hooks.callHook("dom:beforeRender",o),!o.shouldRender)return;const s=(await e.resolveTags()).map(l=>({tag:l,id:b.includes(l.tag)?E(l):l.tag,shouldRender:!0}));let r=e._dom;if(!r){r={elMap:{htmlAttrs:t.documentElement,bodyAttrs:t.body}};for(const l of["body","head"]){const c=(f=t==null?void 0:t[l])==null?void 0:f.children;for(const u of[...c].filter(g=>b.includes(g.tagName.toLowerCase())))r.elMap[u.getAttribute("data-hid")||E(await Z(u))]=u}}r.pendingSideEffects={...r.sideEffects||{}},r.sideEffects={};function p(l,c,u){const g=`${l}:${c}`;r.sideEffects[g]=u,delete r.pendingSideEffects[g]}function d({id:l,$el:c,tag:u}){const g=u.tag.endsWith("Attrs");r.elMap[l]=c,g||(["textContent","innerHTML"].forEach(m=>{u[m]&&u[m]!==c[m]&&(c[m]=u[m])}),p(l,"el",()=>{r.elMap[l].remove(),delete r.elMap[l]})),Object.entries(u.props).forEach(([m,y])=>{const C=`attr:${m}`;if(m==="class")for(const T of(y||"").split(" ").filter(Boolean))g&&p(l,`${C}:${T}`,()=>c.classList.remove(T)),!c.classList.contains(T)&&c.classList.add(T);else c.getAttribute(m)!==y&&c.setAttribute(m,y===!0?"":String(y)),g&&p(l,C,()=>c.removeAttribute(m))})}const a=[],i={bodyClose:void 0,bodyOpen:void 0,head:void 0};for(const l of s){const{tag:c,shouldRender:u,id:g}=l;if(u){if(c.tag==="title"){t.title=c.textContent;continue}l.$el=l.$el||r.elMap[g],l.$el?d(l):b.includes(c.tag)&&a.push(l)}}for(const l of a){const c=l.tag.tagPosition||"head";l.$el=t.createElement(l.tag.tag),d(l),i[c]=i[c]||t.createDocumentFragment(),i[c].appendChild(l.$el)}for(const l of s)await e.hooks.callHook("dom:renderTag",l,t,p);i.head&&t.head.appendChild(i.head),i.bodyOpen&&t.body.insertBefore(i.bodyOpen,t.body.firstChild),i.bodyClose&&t.body.appendChild(i.bodyClose),Object.values(r.pendingSideEffects).forEach(l=>l()),e._dom=r,e.dirty=!1,await e.hooks.callHook("dom:rendered",{renders:s})}async function te(e,n={}){const t=n.delayFn||(o=>setTimeout(o,10));return e._domUpdatePromise=e._domUpdatePromise||new Promise(o=>t(async()=>{await ee(e,n),delete e._domUpdatePromise,o()}))}function ne(e){return n=>{var o,s;const t=((s=(o=n.resolvedOptions.document)==null?void 0:o.head.querySelector('script[id="unhead:payload"]'))==null?void 0:s.innerHTML)||!1;return t&&n.push(JSON.parse(t)),{mode:"client",hooks:{"entries:updated":function(r){te(r,e)}}}}}const oe=["templateParams","htmlAttrs","bodyAttrs"],se={hooks:{"tag:normalise":function({tag:e}){["hid","vmid","key"].forEach(o=>{e.props[o]&&(e.key=e.props[o],delete e.props[o])});const t=k(e)||(e.key?`${e.tag}:${e.key}`:!1);t&&(e._d=t)},"tags:resolve":function(e){const n={};e.tags.forEach(o=>{const s=(o.key?`${o.tag}:${o.key}`:o._d)||o._p,r=n[s];if(r){let d=o==null?void 0:o.tagDuplicateStrategy;if(!d&&oe.includes(o.tag)&&(d="merge"),d==="merge"){const a=r.props;["class","style"].forEach(i=>{a[i]&&(o.props[i]?(i==="style"&&!a[i].endsWith(";")&&(a[i]+=";"),o.props[i]=`${a[i]} ${o.props[i]}`):o.props[i]=a[i])}),n[s].props={...a,...o.props};return}else if(o._e===r._e){r._duped=r._duped||[],o._d=`${r._d}:${r._duped.length+1}`,r._duped.push(o);return}else if(H(o)>H(r))return}const p=Object.keys(o.props).length+(o.innerHTML?1:0)+(o.textContent?1:0);if(b.includes(o.tag)&&p===0){delete n[s];return}n[s]=o});const t=[];Object.values(n).forEach(o=>{const s=o._duped;delete o._duped,t.push(o),s&&t.push(...s)}),e.tags=t,e.tags=e.tags.filter(o=>!(o.tag==="meta"&&(o.props.name||o.props.property)&&!o.props.content))}}},re={mode:"server",hooks:{"tags:resolve":function(e){const n={};e.tags.filter(t=>["titleTemplate","templateParams","title"].includes(t.tag)&&t._m==="server").forEach(t=>{n[t.tag]=t.tag.startsWith("title")?t.textContent:t.props}),Object.keys(n).length&&e.tags.push({tag:"script",innerHTML:JSON.stringify(n),props:{id:"unhead:payload",type:"application/json"}})}}},ie=["script","link","bodyAttrs"];function ae(e){const n={},t={};return Object.entries(e.props).forEach(([o,s])=>{o.startsWith("on")&&typeof s=="function"?(I.includes(o)&&(n[o]=`this.dataset.${o} = true`),t[o]=s):n[o]=s}),{props:n,eventHandlers:t}}const le=e=>({hooks:{"tags:resolve":function(n){for(const t of n.tags)if(ie.includes(t.tag)){const{props:o,eventHandlers:s}=ae(t);t.props=o,Object.keys(s).length&&((t.props.src||t.props.href)&&(t.key=t.key||A(t.props.src||t.props.href)),t._eventHandlers=s)}},"dom:renderTag":function(n,t,o){if(!n.tag._eventHandlers)return;const s=n.tag.tag==="bodyAttrs"?t.defaultView:n.$el;Object.entries(n.tag._eventHandlers).forEach(([r,p])=>{const d=`${n.tag._d||n.tag._p}:${r}`,a=r.slice(2).toLowerCase(),i=`data-h-${a}`;if(o(n.id,d,()=>{}),n.$el.hasAttribute(i))return;n.$el.setAttribute(i,"");let f;const l=c=>{p(c),f==null||f.disconnect()};r in n.$el.dataset?l(new Event(r.replace("on",""))):I.includes(r)&&typeof MutationObserver<"u"?(f=new MutationObserver(c=>{c.some(g=>g.attributeName===`data-${r}`)&&(l(new Event(r.replace("on",""))),f==null||f.disconnect())}),f.observe(n.$el,{attributes:!0})):s.addEventListener(a,l),o(n.id,d,()=>{f==null||f.disconnect(),s.removeEventListener(a,l),n.$el.removeAttribute(i)})})}}}),ce=["link","style","script","noscript"],de={hooks:{"tag:normalise":({tag:e})=>{e.key&&ce.includes(e.tag)&&(e.props["data-hid"]=e._h=A(e.key))}}},fe={hooks:{"tags:resolve":e=>{const n=t=>{var o;return(o=e.tags.find(s=>s._d===t))==null?void 0:o._p};for(const{prefix:t,offset:o}of Y)for(const s of e.tags.filter(r=>typeof r.tagPriority=="string"&&r.tagPriority.startsWith(t))){const r=n(s.tagPriority.replace(t,""));typeof r<"u"&&(s._p=r+o)}e.tags.sort((t,o)=>t._p-o._p).sort((t,o)=>H(t)-H(o))}}},pe={meta:"content",link:"href",htmlAttrs:"lang"},ue=e=>({hooks:{"tags:resolve":n=>{var d;const{tags:t}=n,o=(d=t.find(a=>a.tag==="title"))==null?void 0:d.textContent,s=t.findIndex(a=>a.tag==="templateParams"),r=s!==-1?t[s].props:{},p=r.separator||"|";delete r.separator,r.pageTitle=v(r.pageTitle||o||"",r,p);for(const a of t.filter(i=>i.processTemplateParams!==!1)){const i=pe[a.tag];i&&typeof a.props[i]=="string"?a.props[i]=v(a.props[i],r,p):(a.processTemplateParams===!0||["titleTemplate","title"].includes(a.tag))&&["innerHTML","textContent"].forEach(f=>{typeof a[f]=="string"&&(a[f]=v(a[f],r,p))})}e._templateParams=r,e._separator=p,n.tags=t.filter(a=>a.tag!=="templateParams")}}}),ge={hooks:{"tags:resolve":e=>{const{tags:n}=e;let t=n.findIndex(s=>s.tag==="titleTemplate");const o=n.findIndex(s=>s.tag==="title");if(o!==-1&&t!==-1){const s=$(n[t].textContent,n[o].textContent);s!==null?n[o].textContent=s||n[o].textContent:delete n[o]}else if(t!==-1){const s=$(n[t].textContent);s!==null&&(n[t].textContent=s,n[t].tag="title",t=-1)}t!==-1&&delete n[t],e.tags=n.filter(Boolean)}}},me={hooks:{"tags:afterResolve":function(e){for(const n of e.tags)typeof n.innerHTML=="string"&&(n.innerHTML&&["application/ld+json","application/json"].includes(n.props.type)?n.innerHTML=n.innerHTML.replace(/</g,"\\u003C"):n.innerHTML=n.innerHTML.replace(new RegExp(`</${n.tag}`,"g"),`<\\/${n.tag}`))}}};let R;function he(e={}){const n=ye(e);return n.use(ne()),R=n}function j(e,n){return!e||e==="server"&&n||e==="client"&&!n}function ye(e={}){const n=U();n.addHooks(e.hooks||{}),e.document=e.document||(G?document:void 0);const t=!e.document,o=()=>{d.dirty=!0,n.callHook("entries:updated",d)};let s=0,r=[];const p=[],d={plugins:p,dirty:!1,resolvedOptions:e,hooks:n,headEntries(){return r},use(a){const i=typeof a=="function"?a(d):a;(!i.key||!p.some(f=>f.key===i.key))&&(p.push(i),j(i.mode,t)&&n.addHooks(i.hooks||{}))},push(a,i){i==null||delete i.head;const f={_i:s++,input:a,...i};return j(f.mode,t)&&(r.push(f),o()),{dispose(){r=r.filter(l=>l._i!==f._i),n.callHook("entries:updated",d),o()},patch(l){r=r.map(c=>(c._i===f._i&&(c.input=f.input=l),c)),o()}}},async resolveTags(){const a={tags:[],entries:[...r]};await n.callHook("entries:resolve",a);for(const i of a.entries){const f=i.resolvedInput||i.input;if(i.resolvedInput=await(i.transform?i.transform(f):f),i.resolvedInput)for(const l of await Q(i)){const c={tag:l,entry:i,resolvedOptions:d.resolvedOptions};await n.callHook("tag:normalise",c),a.tags.push(c.tag)}}return await n.callHook("tags:beforeResolve",a),await n.callHook("tags:resolve",a),await n.callHook("tags:afterResolve",a),a.tags},ssr:t};return[se,re,le,de,fe,ue,ge,me,...(e==null?void 0:e.plugins)||[]].forEach(a=>d.use(a)),d.hooks.callHook("init",d),d}function Te(){return R}const be=K.startsWith("3");function ve(e){return typeof e=="function"?e():O(e)}function _(e,n=""){if(e instanceof Promise)return e;const t=ve(e);return!e||!t?t:Array.isArray(t)?t.map(o=>_(o,n)):typeof t=="object"?Object.fromEntries(Object.entries(t).map(([o,s])=>o==="titleTemplate"||o.startsWith("on")?[o,O(s)]:[o,_(s,o)])):t}const He={hooks:{"entries:resolve":function(e){for(const n of e.entries)n.resolvedInput=_(n.input)}}},W="usehead";function _e(e){return{install(t){be&&(t.config.globalProperties.$unhead=e,t.config.globalProperties.$head=e,t.provide(W,e))}}.install}function Ae(e={}){e.domDelayFn=e.domDelayFn||(t=>D(()=>setTimeout(()=>t(),0)));const n=he(e);return n.use(He),n.install=_e(n),n}const P=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},w="__unhead_injection_handler__";function Ce(e){P[w]=e}function Ee(){if(w in P)return P[w]();const e=N(W);return e||Te()}export{ee as a,Ae as c,Ee as i,_ as r,Ce as s};
//# sourceMappingURL=vue.cf295fb1.d2480b66.js.map
